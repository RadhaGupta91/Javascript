<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Promises</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <script>
            
            /**Factorial **/
            function factorial(num) 
            {
                var nextNum = num - 1;
                // Base case
                if (num === 1) {
                    return num; // return 1;
                }
                return num * factorial(nextNum);
            }
            console.log(factorial(5)); // 120
               
            function iterativeFactorial(num) 
            {
                if (num < 0) {
                    throw new Error("Negative factorial results in undefined value.");
                }
                
                var result = 1;
                
                while (num > 1)
                {
                    result *= num;
                    num--;
                }
                return result;
            }
            console.log(iterativeFactorial(5));
            
            /**Reversing a String **
            * @param str the String to reverse.
            *
            * Function call returns
            * reverseStr("troll");
            * return reverseStr("roll") + "t";
            * return reverseStr("oll") + "r";
            * return reverseStr("ll") + "o";
            * return reverseStr("l") + "l";
            * return "l";
            *
            * Results will bubble up as reverseStr("l") is popped off the
            call stack,
            * followed by reverseStr("ll");
            *
            * l
            * ll
            * llo
            * llor
            * llort
            * */
            function reverseStr(str) 
            {
                if (str.length <= 1) // to prevent empty string from overflowing call stack
                { 
                    return str;
                }
                return reverseStr(str.substr(1)) + str.charAt(0);
            }
            console.log(reverseStr("troll")); // Should return "llort"
           
            // Iterative approach
            function reverseStrIter(str) 
            {
                return str.split("").reverse().join("");
            }
            console.log(reverseStrIter("troll")); // "llort"

            /**
             * In order to optimize the fibonacci function, use memoization!
             * fibonacci(5) --> 5
             * fibonacci(10) --> 55
             * fibonacci(15) --> 610
             *
             * @param {Number} num the nth number of a fibonacci series
             * @return {Number} the result of the nth number of a fibonacci
            series.
             */
            function fibonacci(num) {
             if (num <= 2) {
             switch (num) {
             case 1: case 2: return 1;
             case 0: return 0;
             default: throw new Error("Please insert a positive integer");
             }
             }
             return fibonacci(num - 1) + fibonacci(num - 2);
            }
            function fibonacciIter(num) 
            {
                if (num <= 2) {
                return 1; // First two numbers of fib sequence is equal to 1
                } 
                else
                {
                    var result = 0; // variable holding result
                    var counter = 2; // Starting point of iteration
                    var prevNo = 1; // prev number aka xn-1. Equals
                    var prevPrevNo = 1; // prev number of previous
                    while (counter < num)
                    {
                        result = prevNo + prevPrevNo; // xn = xn-1 + xn-2
                        var temp = prevNo; 
                        prevNo = result; // xn-1 = xn
                        prevPrevNo = temp; // xn-2 = xn-1. 
                        counter++;
                    }
                }
                return result;
            }
            console.log(fibonacciIter(10)); // 55
            
            /************************************************
             Check how many times a particular digit occurred in a number.
             */
            function getDigitCount(num, digit) {
                // Validation checks. Note that you can also throw an error
                //if digit is not a number to make the validation check strict.
                if (typeof digit !== "string") {
                    digit = digit.toString();
                }
                if (digit.length !== 1) {
                    throw new Error("Please enter a single digit.");
                }
                if (typeof num !== "number") {
                    throw new Error("num must be of type number");
                }

                // Keep track of digits
                var digitOccurCount = 0;
                // Convert number to string
                num = num.toString();
                var recursiveDigitCounter = function (num, digit)
                {
                    // Base case
                    if (num.length === 0) {
                        return;
                    }
                    var currentNumber = num.charAt(0);
                    if (currentNumber === digit) {
                        digitOccurCount++;
                    }
                    recursiveDigitCounter(num.substring(1, num.length), digit);
                };

                recursiveDigitCounter(num, digit);
                return digitOccurCount;
            }
            console.log(getDigitCount(712290292342, 2));
            
            /************************************************
             Check how many times a particular digit occurred in a number without recursion.
             */
            function getDigitCountIter(num, digitToCount) 
            {
                // Validation checked omitted.
                var digitOccurCount = 0;
                num = num.toString().split('');
                var len = num.length;
                for (var i = 0; i < len; i++) {
                    var curNum = Number(num[i]);
                    if (curNum === digitToCount) {
                        digitOccurCount++;
                    }
                }
                return digitOccurCount;
            }
            console.log(getDigitCountIter(79092342, 2));
            function removeReoccuringCharacters(str)
            {
                if(typeof str != "string")
                {
                    throw new Error("Invalid string!!! Please enter a valid String");
                }
                 var charMap = {};
                 var result = [];
                 var removeRepeatingChar = function(str){
                     var len = str.length;
                     firstchar = str[0];
                     if(!charMap.hasOwnProperty(firstchar))
                     {
                         charMap[firstchar] = true;
                         result.push(firstchar);
                     }
                 }
                 removeRepeatingChar(str);
                 return result.join("");
            }
            console.log(removeReoccuringCharacters("hello"));
            
            /**Greatest Common Divisor **/
            function getGcd(num1, num2) 
            {
                if (num1 % num2 === 0) 
                {
                    return num2;
                }
                return getGcd(num2, num1 % num2);
            }
            console.log(getGcd(280,60));
            
            /**Binary Search**/
            
        </script>
    </body>
</html>
